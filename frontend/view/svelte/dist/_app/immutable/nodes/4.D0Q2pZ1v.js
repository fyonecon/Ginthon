import"../chunks/DsnmJJEf.js";import{o as we,q as pa,z as ve,v as J,w as ha,J as ya,k as c,Y as _a,M as ba,O as xa,P as ze,y as me,A as ie,C as ga,aT as wa,a5 as ka,a9 as ke,ab as Ea,aV as Aa,aw as Pe,aR as je,ak as Sa,a_ as $e,a6 as ea,a8 as Ta,a$ as aa,b0 as Ma,b1 as pe,x as za,b2 as Pa,b3 as Ca,aQ as Ha,a7 as La,aE as Ce,b4 as ta,I as Na,b5 as Wa,B as ra,h as Da,ax as Ua,l as Ia,b6 as Oa,p as Ra,f as B,s as F,a as j,t as V,b as C,c as Fa,d as G,b7 as qa,$ as Ba,r as U,aY as H,aZ as oe,aX as He,S as Le}from"../chunks/DrjxYvK-.js";import{c as Ga,o as Ja,d as Va,e as Ya,s as $}from"../chunks/CuY_0suZ.js";import{p as Ka,i as X}from"../chunks/x_5acz5k.js";import{h as Qa}from"../chunks/vYbXfTaa.js";import{s as he,r as Xa,a as Ne}from"../chunks/DHNMMbaw.js";import{t as Za,c as ja}from"../chunks/BRzKQYUk.js";import{i as $a,a as et,b as at,c as tt}from"../chunks/CILStd6v.js";import{r as rt}from"../chunks/_4VbDSTS.js";function st(e,a){return a}function nt(e,a,r){for(var u=[],n=a.length,o=0;o<n;o++)Pa(a[o].e,u,!0);Ca(u,()=>{var s=u.length===0&&r!==null;if(s){var v=r,l=v.parentNode;Ha(l),l.append(v),e.items.clear(),R(e,a[0].prev,a[n-1].next)}for(var x=0;x<n;x++){var p=a[x];s||(e.items.delete(p.k),R(e,p.prev,p.next)),La(p.e,!s)}e.first===a[0]&&(e.first=a[0].prev)})}function le(e,a,r,u,n,o=null){var s=e,v=new Map,l=null,x=(a&ta)!==0,p=(a&aa)!==0,T=(a&$e)!==0;if(x){var w=e;s=J?ve(ha(w)):w.appendChild(we())}J&&ya();var m=null,E=_a(()=>{var d=r();return Sa(d)?d:d==null?[]:je(d)}),S,i=!0;function _(){it(b,S,s,a,u),m!==null&&(S.length===0?(m.fragment?(s.before(m.fragment),m.fragment=null):ea(m.effect),I.first=m.effect):Ta(m.effect,()=>{m=null}))}var I=pa(()=>{S=c(E);var d=S.length;let M=!1;if(J){var P=ba(s)===xa;P!==(d===0)&&(s=ze(),ve(s),me(!1),M=!0)}for(var y=new Set,t=ka,f=null,g=Ea(),k=0;k<d;k+=1){J&&ie.nodeType===ga&&ie.data===wa&&(s=ie,M=!0,me(!1));var z=S[k],A=u(z,k),h=i?null:v.get(A);h?(p&&Ce(h.v,z),T?Ce(h.i,k):h.i=k,g&&t.skipped_effects.delete(h.e)):(h=ot(i?s:null,f,z,A,k,n,a,r),i&&(h.o=!0,f===null?l=h:f.next=h,f=h),v.set(A,h)),y.add(A)}if(d===0&&o&&!m)if(i)m={fragment:null,effect:ke(()=>o(s))};else{var N=document.createDocumentFragment(),L=we();N.append(L),m={fragment:N,effect:ke(()=>o(L))}}if(J&&d>0&&ve(ze()),!i)if(g){for(const[D,O]of v)y.has(D)||t.skipped_effects.add(O.e);t.oncommit(_),t.ondiscard(()=>{})}else _();M&&me(!0),c(E)}),b={effect:I,items:v,first:l};i=!1,J&&(s=ie)}function it(e,a,r,u,n){var o=(u&Wa)!==0,s=a.length,v=e.items,l=e.first,x,p=null,T,w=[],m=[],E,S,i,_;if(o)for(_=0;_<s;_+=1)E=a[_],S=n(E,_),i=v.get(S),i.o&&(i.a?.measure(),(T??=new Set).add(i));for(_=0;_<s;_+=1){if(E=a[_],S=n(E,_),i=v.get(S),e.first??=i,!i.o){i.o=!0;var I=p?p.next:l;R(e,p,i),R(e,i,I),ye(i,I,r),p=i,w=[],m=[],l=p.next;continue}if((i.e.f&pe)!==0&&(ea(i.e),o&&(i.a?.unfix(),(T??=new Set).delete(i))),i!==l){if(x!==void 0&&x.has(i)){if(w.length<m.length){var b=m[0],d;p=b.prev;var M=w[0],P=w[w.length-1];for(d=0;d<w.length;d+=1)ye(w[d],b,r);for(d=0;d<m.length;d+=1)x.delete(m[d]);R(e,M.prev,P.next),R(e,p,M),R(e,P,b),l=b,p=P,_-=1,w=[],m=[]}else x.delete(i),ye(i,l,r),R(e,i.prev,i.next),R(e,i,p===null?e.first:p.next),R(e,p,i),p=i;continue}for(w=[],m=[];l!==null&&l.k!==S;)(l.e.f&pe)===0&&(x??=new Set).add(l),m.push(l),l=l.next;if(l===null)continue;i=l}w.push(i),p=i,l=i.next}let y=v.size>s;if(l!==null||x!==void 0){for(var t=x===void 0?[]:je(x);l!==null;)(l.e.f&pe)===0&&t.push(l),l=l.next;var f=t.length;if(y=v.size-f>s,f>0){var g=(u&ta)!==0&&s===0?r:null;if(o){for(_=0;_<f;_+=1)t[_].a?.measure();for(_=0;_<f;_+=1)t[_].a?.fix()}nt(e,t,g)}}if(y)for(const k of v.values())k.o||(R(e,p,k),p=k);e.effect.last=p&&p.e,o&&Na(()=>{if(T!==void 0)for(i of T)i.a?.apply()})}function ot(e,a,r,u,n,o,s,v){var l=(s&aa)!==0,x=(s&Ma)===0,p=l?x?Aa(r,!1,!1):Pe(r):r,T=(s&$e)===0?n:Pe(n),w={i:T,v:p,k:u,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var m=document.createDocumentFragment();m.append(e=we())}return w.e=ke(()=>o(e,p,T,v)),a!==null&&(a.next=w),w}finally{}}function ye(e,a,r){for(var u=e.next?e.next.e.nodes_start:r,n=a?a.e.nodes_start:r,o=e.e.nodes_start;o!==null&&o!==u;){var s=za(o);n.before(o),o=s}}function R(e,a,r){a===null?(e.first=r,e.effect.first=r&&r.e):(a.e.next&&(a.e.next.prev=null),a.next=r,a.e.next=r&&r.e),r!==null&&(r.e.prev&&(r.e.prev.next=null),r.prev=a,r.e.prev=a&&a.e)}function We(e,a,r){ra(()=>{var u=Da(()=>a(e,r?.())||{});if(r&&u?.update){var n=!1,o={};Ua(()=>{var s=r();Ia(s),n&&Oa(o,s)&&(o=s,u.update(s))}),n=!0}if(u?.destroy)return()=>u.destroy()})}function ee(e,a,r,u,n,o){var s=e.__className;if(J||s!==r||s===void 0){var v=Za(r,u,o);(!J||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=r}else if(o&&n!==o)for(var l in o){var x=!!o[l];(n==null||x!==!!n[l])&&e.classList.toggle(l,x)}return o}class lt{#e;#a;constructor(a,r){this.#e=a,this.#a=Ga(r)}get current(){return this.#a(),this.#e()}}const ct=/\(.+\)/,ft=new Set(["all","print","screen","and","or","not","only"]);class dt extends lt{constructor(a,r){let u=ct.test(a)||a.split(/[\s,]+/).some(o=>ft.has(o.trim()))?a:`(${a})`;const n=window.matchMedia(u);super(()=>n.matches,o=>Ja(n,"change",o))}}function ut(e){const a=JSON.parse(e);return a.data&&(a.data=at(a.data,tt.decoders)),a}function _e(e){return HTMLElement.prototype.cloneNode.call(e)}function vt(e,a=()=>{}){const r=async({action:n,result:o,reset:s=!0,invalidateAll:v=!0})=>{o.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(e),v&&await $a()),(location.origin+location.pathname===n.origin+n.pathname||o.type==="redirect"||o.type==="error")&&await et(o)};async function u(n){if((n.submitter?.hasAttribute("formmethod")?n.submitter.formMethod:_e(e).method)!=="post")return;n.preventDefault();const s=new URL(n.submitter?.hasAttribute("formaction")?n.submitter.formAction:_e(e).action),v=n.submitter?.hasAttribute("formenctype")?n.submitter.formEnctype:_e(e).enctype,l=new FormData(e,n.submitter),x=new AbortController;let p=!1;const w=await a({action:s,cancel:()=>p=!0,controller:x,formData:l,formElement:e,submitter:n.submitter})??r;if(p)return;let m;try{const E=new Headers({accept:"application/json","x-sveltekit-action":"true"});v!=="multipart/form-data"&&E.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(v)?v:"application/x-www-form-urlencoded");const S=v==="multipart/form-data"?l:new URLSearchParams(l),i=await fetch(s,{method:"POST",headers:E,cache:"no-store",body:S,signal:x.signal});m=ut(await i.text()),m.type==="error"&&(m.status=i.status)}catch(E){if(E?.name==="AbortError")return;m={type:"error",error:E}}await w({action:s,formData:l,formElement:e,update:E=>r({action:s,result:m,reset:E?.reset,invalidateAll:E?.invalidateAll}),result:m})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",u)}}}var De="mz3PUW_p",Ue=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ie=3500,Oe=.5,Re=150,Fe="mix",qe=12,Be="",Ge=!0,Je=800,Ve=1600;function mt(e,a={}){let{colors:r=Ue,duration:u=Ie,force:n=Oe,particleCount:o=Re,particleShape:s=Fe,particleSize:v=qe,particleClass:l=Be,destroyAfterDone:x=Ge,stageHeight:p=Je,stageWidth:T=Ve}=a;(function(b){if(document.querySelector("style[data-neoconfetti]"))return;const d=be("style");d.dataset.neoconfetti="",d.textContent=b,xe(document.head,d)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",p+"px");let w=[],m=[];const E=()=>ae(q()*(bt-1)),S=(b,d)=>s!=="rectangles"&&(b==="circles"||xt(d));function i(b,d){const M=E(),P=S(s,M),y=(g,k)=>b.style.setProperty(g,k+"");y("--xlp",ge(ce(Xe(d,90)-180),0,180,-T/2,T/2)+"px"),y("--dc",u-ae(1e3*q())+"ms");const t=q()<ht?Z(q()*yt,2):0;y("--x1",t),y("--x2",-1*t),y("--x3",t),y("--x4",Z(ce(ge(ce(Xe(d,90)-180),0,180,-1,1)),4)),y("--y1",Z(q()*Ke,4)),y("--y2",Z(q()*n*(sa()?1:-1),4)),y("--y3",Ke),y("--y4",Z(_t(ge(ce(d-180),0,180,n,-n),0),4)),y("--w",(P?v:ae(4*q())+v/2)+"px"),y("--h",(P?v:ae(2*q())+v)+"px");const f=M.toString(2).padStart(3,"0").split("");y("--hr",f.map((g=>+g/2+"")).join(" ")),y("--r",f.join(" ")),y("--rd",Z(q()*(pt-Ye)+Ye)+"ms"),y("--br",P?"50%":0)}let _;function I(){e.innerHTML="",clearTimeout(_),w=Qe(o,r),m=(function(b,d=[],M){const P=[];for(const{color:y}of d){const t=be("div");t.className=`${De} ${M}`,t.style.setProperty("--bgc",y);const f=be("div");xe(t,f),xe(b,t),P.push(t)}return P})(e,w,l);for(const[b,d]of Ze(m))i(d,w[+b].degree);_=setTimeout((()=>{x&&(e.innerHTML="")}),u)}return I(),{update(b){const d=b.particleCount??Re,M=b.particleShape??Fe,P=b.particleSize??qe,y=b.particleClass??Be,t=b.colors??Ue,f=b.stageHeight??Je,g=b.duration??Ie,k=b.force??Oe,z=b.stageWidth??Ve,A=b.destroyAfterDone??Ge;w=Qe(d,t);let h=!1;if(d===o){m=Array.from(e.querySelectorAll(`.${De}`));for(const[N,{color:L}]of Ze(w)){const D=m[+N];JSON.stringify(r)!==JSON.stringify(t)&&D.style.setProperty("--bgc",L),M!==s&&D.style.setProperty("--br",S(M,E())?"50%":"0"),y!==l&&(l&&D.classList.remove(l),y&&D.classList.add(y))}}else h=!0;x&&!A&&clearTimeout(_),e.style.setProperty("--sh",f+"px"),u=g,r=t,n=k,o=d,s=M,v=P,l=y,x=A,p=f,T=z,h&&I()},destroy(){e.innerHTML="",clearTimeout(_)}}}var Ye=200,pt=800,ht=.1,yt=.3,Ke=.5,ce=Math.abs,q=Math.random,ae=Math.round,_t=Math.max,be=e=>document.createElement(e),xe=(e,a)=>e.appendChild(a),Qe=(e,a)=>Array.from({length:e},((r,u)=>({color:a[u%a.length],degree:360*u/e}))),Z=(e,a=2)=>ae((e+Number.EPSILON)*10**a)/10**a,ge=(e,a,r,u,n)=>(e-a)*(n-u)/(r-a)+u,Xe=(e,a)=>e+a>360?e+a-360:e+a,sa=()=>q()>.5,Ze=Object.entries,bt=6,xt=e=>e!==1&&sa(),gt=B('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),wt=B('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),kt=B('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),Et=B('<p class="svelte-115oxdy"> </p>'),At=B('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),St=B('<button formaction="?/update" name="key"> </button>'),Tt=B('<div class="row svelte-115oxdy"></div>'),Mt=B('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),zt=B('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Pt=B('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Rt(e,a){Ra(a,!0);let r=Ka(a,"form",15);const u=new dt("(prefers-reduced-motion: reduce)");let n=H(()=>a.data.answers.at(-1)==="xxxxx"),o=H(()=>c(n)?-1:a.data.answers.length),s=H(()=>a.data.guesses[c(o)]||""),v=H(()=>c(s).length===5);const l=H(()=>{let t={},f={};return a.data.answers.forEach((g,k)=>{const z=a.data.guesses[k];for(let A=0;A<5;A+=1){const h=z[A];g[A]==="x"?(t[h]="exact",f[h]="correct"):t[h]||(t[h]=g[A]==="c"?"close":"missing",f[h]=g[A]==="c"?"present":"absent")}}),{classnames:t,description:f}}),x=H(()=>c(l).classnames),p=H(()=>c(l).description);function T(t){t.preventDefault();const f=t.target.getAttribute("data-key");f==="backspace"?(Le(s,c(s).slice(0,-1)),r()?.badGuess&&r(r().badGuess=!1,!0)):c(s).length<5&&Le(s,c(s)+f)}function w(t){t.metaKey||t.key==="Enter"&&!c(v)||document.querySelector(`[data-key="${t.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var m=Pt();Ya("keydown",qa,w),Qa("115oxdy",t=>{var f=gt();ra(()=>{Ba.title="Sverdle"}),C(t,f)});var E=F(j(m),2),S=G(E),i=F(S,2);let _;le(i,20,()=>Array.from(Array(6).keys()),t=>t,(t,f)=>{const g=H(()=>f===c(o));var k=kt(),z=j(k),A=G(z);U(z);var h=F(z,2);let N;le(h,20,()=>Array.from(Array(5).keys()),L=>L,(L,D)=>{const O=H(()=>c(g)?c(s):a.data.guesses[f]),W=H(()=>a.data.answers[f]?.[D]),te=H(()=>c(O)?.[D]??""),na=H(()=>c(g)&&D===c(O).length),Ee=H(()=>c(W)==="x"),Ae=H(()=>c(W)==="c"),Se=H(()=>c(W)==="_");var re=wt();let Te;var Me=G(re),fe=F(Me),ia=G(fe);{var oa=Y=>{var se=oe("(correct)");C(Y,se)},la=Y=>{var se=He(),ca=j(se);{var fa=K=>{var ne=oe("(present)");C(K,ne)},da=K=>{var ne=He(),ua=j(ne);{var va=Q=>{var ue=oe("(absent)");C(Q,ue)},ma=Q=>{var ue=oe("empty");C(Q,ue)};X(ua,Q=>{c(Se)?Q(va):Q(ma,!1)},!0)}C(K,ne)};X(ca,K=>{c(Ae)?K(fa):K(da,!1)},!0)}C(Y,se)};X(ia,Y=>{c(Ee)?Y(oa):Y(la,!1)})}U(fe);var de=F(fe,2);Xa(de),U(re),V(()=>{Te=ee(re,1,"letter svelte-115oxdy",null,Te,{exact:c(Ee),close:c(Ae),missing:c(Se),selected:c(na)}),$(Me,`${c(te)??""} `),de.disabled=!c(g),Ne(de,c(te))}),C(L,re)}),U(h),V(()=>{$(A,`Row ${f+1}`),N=ee(h,1,"row svelte-115oxdy",null,N,{current:c(g)})}),C(t,k)}),U(i);var I=F(i,2),b=G(I);{var d=t=>{var f=At(),g=j(f);{var k=h=>{var N=Et(),L=G(N);U(N),V(()=>$(L,`the answer was "${a.data.answer??""}"`)),C(h,N)};X(g,h=>{!c(n)&&a.data.answer&&h(k)})}var z=F(g,2),A=G(z);U(z),V(()=>$(A,`${c(n)?"you won :)":"game over :("} play again?`)),C(t,f)},M=t=>{var f=Mt(),g=G(f);let k;var z=F(g,2);z.__click=T;var A=F(z,2);le(A,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],h=>h,(h,N)=>{var L=Tt();le(L,21,()=>N,st,(D,O)=>{var W=St();W.__click=T;var te=G(W,!0);U(W),V(()=>{he(W,"data-key",c(O)),ee(W,1,ja(c(x)[c(O)]),"svelte-115oxdy"),W.disabled=c(v),Ne(W,c(O)),he(W,"aria-label",`${c(O)??""} ${(c(p)[c(O)]||"")??""}`),$(te,c(O))}),C(D,W)}),U(L),C(h,L)}),U(f),V(()=>{g.disabled=!c(v),k=ee(g,1,"svelte-115oxdy",null,k,{selected:c(v)})}),C(t,f)};X(b,t=>{c(n)||a.data.answers.length>=6?t(d):t(M,!1)})}U(I),U(E),We(E,(t,f)=>vt?.(t,f),()=>()=>({update:t})=>{t({reset:!1})});var P=F(E,2);{var y=t=>{var f=zt();We(f,(g,k)=>mt?.(g,k),()=>({particleCount:u.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),C(t,f)};X(P,t=>{c(n)&&t(y)})}V(t=>{he(S,"href",t),_=ee(i,1,"grid svelte-115oxdy",null,_,{playing:!c(n),"bad-guess":r()?.badGuess})},[()=>rt("/sverdle/how-to-play")]),C(e,m),Fa()}Va(["click"]);export{Rt as component};
